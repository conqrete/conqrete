#!/bin/bash

# Info
echo "ğŸ”¹ Running clean.sh"

# Searching Tuist
echo ""
echo "ğŸ”¹ [1/3] Searching for Tuist..."

export TUIST=$(which tuist)

if ! command -v $TUIST &> /dev/null; then
    echo "âŒ Tuist not found"
    exit 1
else
    echo "âœ… Found Tuist at $TUIST"
fi

# Clean Ttuist caches
echo ""
echo "ğŸ”¹ [2/3] Cleaning Tuist caches"

$TUIST clean

echo "âœ… Completed cleaning Tuist caches"

# Clean Xcode caches
echo "ğŸ”¹ [3/3] Cleaninig Xcode workspace, project and caches"

rm -rf -f ./Derived ./DerivedData ./{{ name }}.xcodeproj ./{{ name }}.xcworkspace

echo "âœ… Completed cleaninig Xcode workspace, project and caches"

# Completed
echo ""
echo "âœ… clean.sh completed"
